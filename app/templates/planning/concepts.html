{% extends 'base.html' %}

{% block content %}
    <div class="mb-4">
        <h2>全文构思列表</h2>
        <p class="text-muted">查看项目的所有全文构思方案</p>
    </div>

    <div class="concepts-grid">
        {% for concept in concepts %}
        <div class="concept-card">
            <div class="concept-header">
                <h5 class="mb-0">构思 #{{ concept.id }}</h5>
                <small class="text-muted">{{ concept.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
            </div>

            <div class="concept-content">
                {% if concept.expansion %}
                <div class="mb-3">
                    <strong>原创意简述：</strong>
                    <p class="mt-2">{{ concept.expansion.summary }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>体裁：</strong>
                    <span>{{ concept.expansion.genre }}</span>
                </div>
                
                <div class="mb-3">
                    <strong>主题：</strong>
                    <p class="mt-2">{{ concept.expansion.theme }}</p>
                </div>
                {% endif %}

                <div class="mb-3">
                    <h6>核心冲突</h6>
                    <p class="text-muted mt-2">{{ concept.core_conflict[:200] + '...' if concept.core_conflict|length > 200 else concept.core_conflict }}</p>
                </div>

                <div class="mb-3">
                    <h6>主要人物</h6>
                    <p class="text-muted mt-2">{{ concept.main_characters[:200] + '...' if concept.main_characters|length > 200 else concept.main_characters }}</p>
                </div>
            </div>

            <div class="concept-stats text-muted small mb-3">
                <div class="d-flex justify-content-between">
                    <span><strong>预计字数：</strong> {{ concept.word_count_target }}</span>
                    <span><strong>预计章节数：</strong> {{ concept.estimated_chapters }}</span>
                </div>
            </div>

            <div class="text-end">
                <a href="{{ url_for('concept.show_concept', concept_id=concept.id) }}" class="btn btn-outline-primary">
                    查看详情
                </a>
            </div>
        </div>
        {% else %}
        <div class="alert alert-info">
            还没有生成任何全文构思。请先从创意发散中选择一个创意，然后生成全文构思。
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
.card {
    transition: transform 0.2s ease-in-out;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
</style>
{% endblock %}